1、当templates下的j2模板文件需要设定默认值时，如何设置
1）可以采用defaults目录设定默认变量的方式
defaults目录必须有一个main.yml文件，defaults目录下的变量优先级低于vars目录下的变量
当vars目录下设定对应变量时会覆盖defaults目录下的变量，当vars没有设定变量时就会使用defaults下的变量
2）也可以使用if判断变量是否被设定，建议使用第一种方法
{% if dns_server is undefined %}
nameserver 223.5.5.5
{% else %}
{% for dns in dns_server %}
nameserver {{ dns }}
{% endfor %}
{% endif %}

2、当templates下的j2模板文件使用for循环时，比如
{% for dns in dns_server %}
nameserver {{ dns }}
{% endfor %}
此时变量，必须使用列表的方式，不使用列表的方式会循环每个字符，不是字符串
dns_server: ["8.8.8.8","223.5.5.5"]

3、当使用systemd这些模块时，使用with_items
     变量{{ items }}需要在两边加上双引号"{{ item }}"

4、handlers目录下的handler任务，notify被触发需要任务发生changed才会触发handler，否则不会触发handler
     handler被触发后会在整个playbook的最后才会执行，触发后不会立即执行

5、当注册变量以后，是可以在整个playbook里识别到的
     当在when语句中使用变量时，不需要加上{{ variable }}，比如{{ ansible_nodename }}直接写ansible_nodename即可
     当在各个模块中，需要加上{{ variable }}，否则不会为识别变量的值，会直接识别为变量名

6、判断变量值是否为空
      when: mirrors == ""

7、判断变量是否定义
      when: mirrors is defined
      when: gluster_infra_fw_state is not defined

8、shell模块必须要同时执行多个命令时
      yum clean all && yum makecache
      touch a;touch b

9、yum模块安装多个软件包时，name后跟一个列表就可以同时安装多个软件
      - name: yum install base
      yum:
      name: ['rsync',  'vim', 'bash-completion', 'net-tools', 'wget', 'chrony', 'telnet', 'sshpass']
      state: present

10、当需要执行多个role时
      ---
      - name: clusters_init
        hosts: clusters
        gather_facts: false
        roles:
          - system_init
          - clusters
