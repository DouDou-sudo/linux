#!/bin/bash
#安装及检测sshpass
#rpm -q sshpass &>/dev/null || yum -y install sshpass
#生成公私钥对
#[ -f /root/.ssh/id_rsa ] || ssh-keygen -f /root/.ssh/id_rsa -P ''
#读取vars变量，for循环遍历读取变量在ansible_server生成脚本，然后在远端执行,在远端不留痕迹，通过vars读取密码和对应的host,不需要修改多余文件
{% for node in clusters_node%}
sshpass -p {{ pass }} ssh-copy-id -o stricthostkeychecking=no {{ node }}
{% endfor %}
