一、单用户模式runleve1，不需要介质
grub在linux16的 rhgb quiet前加参数1/single，需要输入root密码
二、救援模式，(rescue mode)需要安装介质
systemctl rescue = systemctl isolate rescue.target(使用这两个命令无需安装介质可以直接进入rescue mode）
  1、从光盘启动
  2、Troubleshooting
  3、Rescue a Centos system
  4、选择第一项1）Continue
  5、此时系统根分区挂载在/mnt/sysimage/下，可以chroot /mnt/sysimage/切换到原系统
三、紧急模式（emergency mode）（不需要安装介质）
systemctl emergency = systemctl isolate emergency.target(使用这两个命令无需安装介质可以直接进入emergency mode）
3.1 建议使用使用3.2或3.1
    1、按e键，进入grub界面
    2、在linux16那行，找到ro，将ro改为rw，用init=/sysroot/bin/sh替换内核中的 rhgb quiet
    3、按ctrl+x
    4、切换到原系统执行 chroot /sysroot/
    6、passwd root修改root密码；出现乱码，输入LANG=en
    7、执行 touch /.autorelabel
    8、exit
    9、reboot
3.2
    1、按e键，进入grub界面
    2、在linux16那行， 最后加上rd.break
    3、按ctrl+x
    4、mount -o rw,remount /sysroot
    5、切换到原系统执行 chroot /sysroot/
    6、passwd root修改root密码；出现乱码，输入LANG=en
    7、执行 touch /.autorelabel
    8、exit
    9、reboot
3.3 
    1、按e键，进入grub界面
    2、在linux16那行，用 init=/bin/bash 或 init=/bin/sh 替换内核中的 rhgb quiet
    4、按ctrl+x
    5、mount -o rw,remount / 重新挂载为rw
    6、passwd root修改root密码；出现乱码，输入LANG=en
    7、执行 touch /.autorelabel
    8、exec /sbin/init 重启特别慢

四、grub.cfg文件丢失或损坏
报错：开机出现grub >
4.1、手动敲命令引导，重启后是grub>界面可以尝试手动引导，如果是grub rescue>需要进救援模式，可能是boot整个分区或者/boot/grub2目录丢失
    grub> ls 
    grub> set root=(hd0,msdos1)
    grub>linux16 /vmlinuz-xxxxxx  root=/dev/mapper/centos-root # tab键补全 ，根分区已实际为准  UEFI将linux16改为linuxefi (正常情况执行完以后无任何输出才对)
    grub> initrd16 /initramfs-xxxx # tab键补全  UEFI将initrd16改为initrdefi (正常情况执行完以后无任何输出才对)
    grub> boot进入系统
    进入系统后手动创建grub.cfg文件    
    legacy:  
	centos6: /boot/grub/目录下手动创建或者从其他服务器拷贝grub.cfg再修改，模板见文末
	centos7: grub2-mkconfig -o /boot/grub2/grub.cfg
    UEFI:     grub2-mkconfig   -o   /boot/efi/EFI/KylinSecOS/grub.cfg
4.2、插上光盘进入救援模式(chroot /mnt/sysimage/切换到原系统)或者grub.cfg丢失后还没有重启，可以直接创建grub.cfg
    legacy:  
	centos6: /boot/grub/目录下手动创建或者从其他服务器拷贝grub.cfg再修改，模板见文末
	centos7: grub2-mkconfig -o /boot/grub2/grub.cfg
    UEFI:     grub2-mkconfig   -o   /boot/efi/EFI/KylinSecOS/grub.cfg
4.3、重启
    exit
    reboot
五、/boot/grub2目录丢失
报错：开机出现kernel panic - not syncing......Cail Trace乱码或者开机出现grub rescue>
5.1、插上光盘进入救援模式(chroot /mnt/sysimage/切换到原系统)
5.2、查看boot挂载的分区
    df  -h查看/boot的挂载分区
    /dev/sda1                 1014M  196M  819M   20% /boot
5.3、安装grub，生成/boot/grub2目录下的文件
    centos6: grub-install /dev/sda
    centos7: grub2-install --boot-directory=/boot /dev/sda1 (报error正常现象，看/boot/grub2目录及下面的文件有没有生成即可)
	或者grub2-install --force --recheck --skip-fs-probe /dev/vda4强制安装不会报error，只有warning
5.4、创建grub.cfg启动文件
    见4.2，4.3


六、/boot目录丢失
报错：开机出现grub rescue>
6.1、插上光盘进入救援模式(chroot /mnt/sysimage/切换到原系统)
6.2、挂载镜像，配置yum源，/etc/yum.repos.d/目录下的文件最好先移动备份到其他地方
    mv /etc/yum.repos.d/  /opt/
    mount /dev/sr0 /media
    cat >>/etc/yum.repos.d/cd.repo <<EOF
    > [meida]
    > baseurl=file:///media
    > gpgcheck=0
    > enable=1
    > EOF
    yum clean all && yum makecache
6.3、安装内核，会生成/boot目录下的文件(安装报错使用yum reinstall安装)
    yum install /media/Packages/kernel-xxx.rpm
    或者不配做yum源，之间rpm --force强制安装
    rpm -ivh /mnt/KYLIN/kernel-2.6.* --force等待安装完成
6.4、修复grub，生成/boot/grub2目录下的文件
    见五


centos6的grub.conf模板
default=0
timeout=3
title Kylin 3
	kernel	/vmlinuz-2.6.32-754.23.1.ky3.kb1.pg.x86_64	ro	root=/dev/mapper/VolGroup-LogVol01 quiet
	initrd /initramfs-2.6.32-754.23.1.ky3.kb1.pg.x86_64.img
